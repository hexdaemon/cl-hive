# cl-hive Production Node Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# IMAGE VERSION
# =============================================================================

# Docker image version to use (for pre-built images from GHCR)
# Options: latest, 2.2.1, 2.3.0, main (development)
# To upgrade: change this version, then run: docker-compose pull && docker-compose up -d
CL_HIVE_VERSION=latest

# =============================================================================
# BITCOIN RPC (Required)
# =============================================================================

# Bitcoin Core RPC host
# Use 'host.docker.internal' for local bitcoind on Docker Desktop
# Use IP address for remote or Linux Docker
BITCOIN_RPCHOST=host.docker.internal

# Bitcoin Core RPC port (default: 8332 for mainnet)
BITCOIN_RPCPORT=8332

# Bitcoin Core RPC credentials (required)
BITCOIN_RPCUSER=your_rpc_username
BITCOIN_RPCPASSWORD=your_rpc_password

# =============================================================================
# NETWORK
# =============================================================================

# Network: bitcoin, testnet, signet, regtest
NETWORK=bitcoin

# =============================================================================
# NODE IDENTITY
# =============================================================================

# Node alias (visible on the network)
ALIAS=my-hive-node

# Node color in hex (without #)
RGB=e33502

# =============================================================================
# NETWORK MODE & CONNECTIVITY
# =============================================================================

# Lightning P2P port
LIGHTNING_PORT=9736

# Network mode: tor, clearnet, or hybrid
#   tor      - Tor-only, anonymous, no clearnet (default)
#   clearnet - Direct connections only, requires ANNOUNCE_ADDR
#   hybrid   - Both Tor and clearnet, ANNOUNCE_ADDR recommended
NETWORK_MODE=tor

# Public address to announce (required for clearnet/hybrid)
# Leave empty for Tor-only nodes
# Examples:
#   ANNOUNCE_ADDR=123.45.67.89:9736
#   ANNOUNCE_ADDR=mynode.example.com:9736
ANNOUNCE_ADDR=

# =============================================================================
# WIREGUARD CONFIGURATION
# =============================================================================
# Use WireGuard VPN to securely connect to your bitcoind backend.
# Your VPN administrator will provide the required values below.

# Enable WireGuard VPN
WIREGUARD_ENABLED=false

# -----------------------------------------------------------------------------
# VPN credentials (provided by your VPN administrator)
# -----------------------------------------------------------------------------

# Your WireGuard private key
# Generate with: wg genkey
WG_PRIVATE_KEY=

# Your IP address on the VPN (assigned by VPN admin)
# Example: 10.8.0.2/24
WG_ADDRESS=

# VPN server's public key (provided by VPN admin)
WG_PEER_PUBLIC_KEY=

# VPN server endpoint (provided by VPN admin)
# Format: hostname:port or ip:port
WG_PEER_ENDPOINT=

# DNS server on VPN (optional, provided by VPN admin)
WG_DNS=

# Keepalive interval in seconds (default: 25)
WG_PEER_KEEPALIVE=25

# -----------------------------------------------------------------------------
# Alternative: Mount a complete WireGuard config file
# -----------------------------------------------------------------------------
# If WG_PRIVATE_KEY is not set, the system will look for wg0.conf here
WIREGUARD_CONFIG_PATH=./wireguard

# =============================================================================
# CL-HIVE
# =============================================================================

# Governance mode: advisor, failsafe
# advisor = requires human/AI approval for actions (recommended)
# failsafe = emergency mode - auto-execute only critical safety actions
HIVE_GOVERNANCE_MODE=advisor

# =============================================================================
# EXPERIMENTAL FEATURES
# =============================================================================

# Enable experimental splicing (add/remove funds from channels without closing)
# Required for hive splice coordination
EXPERIMENTAL_SPLICING=true

# =============================================================================
# CHANNEL POLICY
# =============================================================================
# These settings help new nodes attract channels and build reputation.
# Once established, you can increase fees and minimum channel sizes.

# Minimum channel size to accept (satoshis)
# - New node: 500000 (accept smaller channels to grow)
# - Established: 2000000+ (filter for quality channels)
MIN_CAPACITY_SAT=500000

# Base fee in millisatoshis (charged per payment regardless of size)
# - New node: 0 (most attractive for routing)
# - Established: 0-1000 (some nodes charge 1 sat base)
FEE_BASE=0

# Proportional fee in parts per million (ppm)
# - New node: 100 ppm (very competitive)
# - Established: 200-500 ppm (market rate)
# Note: cl-revenue-ops dynamically adjusts per-channel fees
FEE_PER_SATOSHI=100

# Minimum HTLC size in millisatoshis
# - 1000 msat = 1 sat minimum payment
HTLC_MINIMUM_MSAT=1000

# =============================================================================
# REQUIRED PLUGINS (automatically installed)
# =============================================================================
# The following plugins are REQUIRED and always installed:
#   - CLBOSS: Automated channel management (ksedgwic fork with clboss-unmanage)
#   - Sling: Rebalancing (required by cl-revenue-ops)
#   - cl-revenue-ops: Fee optimization and profitability tracking
#   - cl-hive: Fleet coordination and swarm intelligence

# =============================================================================
# LOGGING
# =============================================================================

# Log level: debug, info, unusual, broken
LOG_LEVEL=info

# =============================================================================
# RIDE THE LIGHTNING (RTL)
# =============================================================================

# Enable RTL web interface (true/false)
RTL_ENABLED=true

# RTL web interface password (CHANGE THIS!)
RTL_PASSWORD=changeme

# RTL web interface port
RTL_PORT=3000

# Enable RTL profile (set automatically when RTL_ENABLED=true)
# COMPOSE_PROFILES=rtl

# =============================================================================
# PORTS
# =============================================================================

# Lightning P2P port
LIGHTNING_PORT=9736

# =============================================================================
# OPTIONAL PATHS
# =============================================================================

# Custom config directory (optional)
# CUSTOM_CONFIG_PATH=./config

# =============================================================================
# ADVISOR CONFIGURATION
# =============================================================================

# Advisor database path (auto-configured, override if needed)
# Used by MCP server tools for tracking onboarded members, learning params, etc.
# Default: $LIGHTNING_DIR/advisor/advisor.db
# ADVISOR_DB_PATH=/data/lightning/bitcoin/advisor/advisor.db
